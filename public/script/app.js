const tailwindColors = {
  blueGray50: "#F8FAFC",
  blueGray100: "#F1F5F9",
  blueGray200: "#E2E8F0",
  blueGray300: "#CBD5E1",
  blueGray400: "#94A3B8",
  blueGray500: "#64748B",
  blueGray600: "#475569",
  blueGray700: "#334155",
  blueGray800: "#1E293B",
  blueGray900: "#0F172A",

  coolGray50: "#F9FAFB",
  coolGray100: "#F3F4F6",
  coolGray200: "#E5E7EB",
  coolGray300: "#D1D5DB",
  coolGray400: "#9CA3AF",
  coolGray500: "#6B7280",
  coolGray600: "#4B5563",
  coolGray700: "#374151",
  coolGray800: "#1F2937",
  coolGray900: "#111827",

  gray50: "#FAFAFA",
  gray100: "#F4F4F5",
  gray200: "#E4E4E7",
  gray300: "#D4D4D8",
  gray400: "#A1A1AA",
  gray500: "#71717A",
  gray600: "#52525B",
  gray700: "#3F3F46",
  gray800: "#27272A",
  gray900: "#18181B",

  trueGray50: "#FAFAFA",
  trueGray100: "#F5F5F5",
  trueGray200: "#E5E5E5",
  trueGray300: "#D4D4D4",
  trueGray400: "#A3A3A3",
  trueGray500: "#737373",
  trueGray600: "#525252",
  trueGray700: "#404040",
  trueGray800: "#262626",
  trueGray900: "#171717",

  warmGray50: "#FAFAF9",
  warmGray100: "#F5F5F4",
  warmGray200: "#E7E5E4",
  warmGray300: "#D6D3D1",
  warmGray400: "#A8A29E",
  warmGray500: "#78716C",
  warmGray600: "#57534E",
  warmGray700: "#44403C",
  warmGray800: "#292524",
  warmGray900: "#1C1917",

  red50: "#FEF2F2",
  red100: "#FEE2E2",
  red200: "#FECACA",
  red300: "#FCA5A5",
  red400: "#F87171",
  red500: "#EF4444",
  red600: "#DC2626",
  red700: "#B91C1C",
  red800: "#991B1B",
  red900: "#7F1D1D",

  orange50: "#FFF7ED",
  orange100: "#FFEDD5",
  orange200: "#FED7AA",
  orange300: "#FDBA74",
  orange400: "#FB923C",
  orange500: "#F97316",
  orange600: "#EA580C",
  orange700: "#C2410C",
  orange800: "#9A3412",
  orange900: "#7C2D12",

  amber50: "#FFFBEB",
  amber100: "#FEF3C7",
  amber200: "#FDE68A",
  amber300: "#FCD34D",
  amber400: "#FBBF24",
  amber500: "#F59E0B",
  amber600: "#D97706",
  amber700: "#B45309",
  amber800: "#92400E",
  amber900: "#78350F",

  yellow50: "#FEFCE8",
  yellow100: "#FEF9C3",
  yellow200: "#FEF08A",
  yellow300: "#FDE047",
  yellow400: "#FACC15",
  yellow500: "#EAB308",
  yellow600: "#CA8A04",
  yellow700: "#A16207",
  yellow800: "#854D0E",
  yellow900: "#713F12",

  lime50: "#F7FEE7",
  lime100: "#ECFCCB",
  lime200: "#D9F99D",
  lime300: "#BEF264",
  lime400: "#A3E635",
  lime500: "#84CC16",
  lime600: "#65A30D",
  lime700: "#4D7C0F",
  lime800: "#3F6212",
  lime900: "#365314",

  green50: "#F0FDF4",
  green100: "#DCFCE7",
  green200: "#BBF7D0",
  green300: "#86EFAC",
  green400: "#4ADE80",
  green500: "#22C55E",
  green600: "#16A34A",
  green700: "#15803D",
  green800: "#166534",
  green900: "#14532D",

  emerald50: "#ECFDF5",
  emerald100: "#D1FAE5",
  emerald200: "#A7F3D0",
  emerald300: "#6EE7B7",
  emerald400: "#34D399",
  emerald500: "#10B981",
  emerald600: "#059669",
  emerald700: "#047857",
  emerald800: "#065F46",
  emerald900: "#064E3B",

  teal50: "#F0FDFA",
  teal100: "#CCFBF1",
  teal200: "#99F6E4",
  teal300: "#5EEAD4",
  teal400: "#2DD4BF",
  teal500: "#14B8A6",
  teal600: "#0D9488",
  teal700: "#0F766E",
  teal800: "#115E59",
  teal900: "#134E4A",

  cyan50: "#ECFEFF",
  cyan100: "#CFFAFE",
  cyan200: "#A5F3FC",
  cyan300: "#67E8F9",
  cyan400: "#22D3EE",
  cyan500: "#06B6D4",
  cyan600: "#0891B2",
  cyan700: "#0E7490",
  cyan800: "#155E75",
  cyan900: "#164E63",

  lightBlue50: "#F0F9FF",
  lightBlue100: "#E0F2FE",
  lightBlue200: "#BAE6FD",
  lightBlue300: "#7DD3FC",
  lightBlue400: "#38BDF8",
  lightBlue500: "#0EA5E9",
  lightBlue600: "#0284C7",
  lightBlue700: "#0369A1",
  lightBlue800: "#075985",
  lightBlue900: "#0C4A6E",

  blue50: "#EFF6FF",
  blue100: "#DBEAFE",
  blue200: "#BFDBFE",
  blue300: "#93C5FD",
  blue400: "#60A5FA",
  blue500: "#3B82F6",
  blue600: "#2563EB",
  blue700: "#1D4ED8",
  blue800: "#1E40AF",
  blue900: "#1E3A8A",

  indigo50: "#EEF2FF",
  indigo100: "#E0E7FF",
  indigo200: "#C7D2FE",
  indigo300: "#A5B4FC",
  indigo400: "#818CF8",
  indigo500: "#6366F1",
  indigo600: "#4F46E5",
  indigo700: "#4338CA",
  indigo800: "#3730A3",
  indigo900: "#312E81",

  violet50: "#F5F3FF",
  violet100: "#EDE9FE",
  violet200: "#DDD6FE",
  violet300: "#C4B5FD",
  violet400: "#A78BFA",
  violet500: "#8B5CF6",
  violet600: "#7C3AED",
  violet700: "#6D28D9",
  violet800: "#5B21B6",
  violet900: "#4C1D95",

  purple50: "#FAF5FF",
  purple100: "#F3E8FF",
  purple200: "#E9D5FF",
  purple300: "#D8B4FE",
  purple400: "#C084FC",
  purple500: "#A855F7",
  purple600: "#9333EA",
  purple700: "#7E22CE",
  purple800: "#6B21A8",
  purple900: "#581C87",

  fuchsia50: "#FDF4FF",
  fuchsia100: "#FAE8FF",
  fuchsia200: "#F5D0FE",
  fuchsia300: "#F0ABFC",
  fuchsia400: "#E879F9",
  fuchsia500: "#D946EF",
  fuchsia600: "#C026D3",
  fuchsia700: "#A21CAF",
  fuchsia800: "#86198F",
  fuchsia900: "#701A75",

  pink50: "#FDF2F8",
  pink100: "#FCE7F3",
  pink200: "#FBCFE8",
  pink300: "#F9A8D4",
  pink400: "#F472B6",
  pink500: "#EC4899",
  pink600: "#DB2777",
  pink700: "#BE185D",
  pink800: "#9D174D",
  pink900: "#831843",

  rose50: "#FFF1F2",
  rose100: "#FFE4E6",
  rose200: "#FECDD3",
  rose300: "#FDA4AF",
  rose400: "#FB7185",
  rose500: "#F43F5E",
  rose600: "#E11D48",
  rose700: "#BE123C",
  rose800: "#9F1239",
  rose900: "#881337",
};
const linkTextColors = {
  Amber: tailwindColors.amber400,
  Blue: tailwindColors.blue500,
  Cyan: tailwindColors.cyan500,
  Emerald: tailwindColors.emerald500,
  Fuchsia: tailwindColors.fuchsia500,
  Green: tailwindColors.green500,
  Indigo: tailwindColors.indigo500,
  "Light Blue": tailwindColors.lightBlue400,
  Lime: tailwindColors.lime500,
  Orange: tailwindColors.orange400,
  Pink: tailwindColors.pink500,
  Purple: tailwindColors.purple500,
  Red: tailwindColors.red400,
  Rose: tailwindColors.rose500,
  Teal: tailwindColors.teal400,
  Violet: tailwindColors.violet500,
  Yellow: tailwindColors.yellow500,
};
// const patterns = {
//   jigsaw: "%3Csvg xmlns='http://www.w3.org/2000/svg' width='192' height='192' viewBox='0 0 192 192'%3E%3Cpath fill='%239C92AC' fill-opacity='0.13' d='M192 15v2a11 11 0 0 0-11 11c0 1.94 1.16 4.75 2.53 6.11l2.36 2.36a6.93 6.93 0 0 1 1.22 7.56l-.43.84a8.08 8.08 0 0 1-6.66 4.13H145v35.02a6.1 6.1 0 0 0 3.03 4.87l.84.43c1.58.79 4 .4 5.24-.85l2.36-2.36a12.04 12.04 0 0 1 7.51-3.11 13 13 0 1 1 .02 26 12 12 0 0 1-7.53-3.11l-2.36-2.36a4.93 4.93 0 0 0-5.24-.85l-.84.43a6.1 6.1 0 0 0-3.03 4.87V143h35.02a8.08 8.08 0 0 1 6.66 4.13l.43.84a6.91 6.91 0 0 1-1.22 7.56l-2.36 2.36A10.06 10.06 0 0 0 181 164a11 11 0 0 0 11 11v2a13 13 0 0 1-13-13 12 12 0 0 1 3.11-7.53l2.36-2.36a4.93 4.93 0 0 0 .85-5.24l-.43-.84a6.1 6.1 0 0 0-4.87-3.03H145v35.02a8.08 8.08 0 0 1-4.13 6.66l-.84.43a6.91 6.91 0 0 1-7.56-1.22l-2.36-2.36A10.06 10.06 0 0 0 124 181a11 11 0 0 0-11 11h-2a13 13 0 0 1 13-13c2.47 0 5.79 1.37 7.53 3.11l2.36 2.36a4.94 4.94 0 0 0 5.24.85l.84-.43a6.1 6.1 0 0 0 3.03-4.87V145h-35.02a8.08 8.08 0 0 1-6.66-4.13l-.43-.84a6.91 6.91 0 0 1 1.22-7.56l2.36-2.36A10.06 10.06 0 0 0 107 124a11 11 0 0 0-22 0c0 1.94 1.16 4.75 2.53 6.11l2.36 2.36a6.93 6.93 0 0 1 1.22 7.56l-.43.84a8.08 8.08 0 0 1-6.66 4.13H49v35.02a6.1 6.1 0 0 0 3.03 4.87l.84.43c1.58.79 4 .4 5.24-.85l2.36-2.36a12.04 12.04 0 0 1 7.51-3.11A13 13 0 0 1 81 192h-2a11 11 0 0 0-11-11c-1.94 0-4.75 1.16-6.11 2.53l-2.36 2.36a6.93 6.93 0 0 1-7.56 1.22l-.84-.43a8.08 8.08 0 0 1-4.13-6.66V145H11.98a6.1 6.1 0 0 0-4.87 3.03l-.43.84c-.79 1.58-.4 4 .85 5.24l2.36 2.36a12.04 12.04 0 0 1 3.11 7.51A13 13 0 0 1 0 177v-2a11 11 0 0 0 11-11c0-1.94-1.16-4.75-2.53-6.11l-2.36-2.36a6.93 6.93 0 0 1-1.22-7.56l.43-.84a8.08 8.08 0 0 1 6.66-4.13H47v-35.02a6.1 6.1 0 0 0-3.03-4.87l-.84-.43c-1.59-.8-4-.4-5.24.85l-2.36 2.36A12 12 0 0 1 28 109a13 13 0 1 1 0-26c2.47 0 5.79 1.37 7.53 3.11l2.36 2.36a4.94 4.94 0 0 0 5.24.85l.84-.43A6.1 6.1 0 0 0 47 84.02V49H11.98a8.08 8.08 0 0 1-6.66-4.13l-.43-.84a6.91 6.91 0 0 1 1.22-7.56l2.36-2.36A10.06 10.06 0 0 0 11 28 11 11 0 0 0 0 17v-2a13 13 0 0 1 13 13c0 2.47-1.37 5.79-3.11 7.53l-2.36 2.36a4.94 4.94 0 0 0-.85 5.24l.43.84A6.1 6.1 0 0 0 11.98 47H47V11.98a8.08 8.08 0 0 1 4.13-6.66l.84-.43a6.91 6.91 0 0 1 7.56 1.22l2.36 2.36A10.06 10.06 0 0 0 68 11 11 11 0 0 0 79 0h2a13 13 0 0 1-13 13 12 12 0 0 1-7.53-3.11l-2.36-2.36a4.93 4.93 0 0 0-5.24-.85l-.84.43A6.1 6.1 0 0 0 49 11.98V47h35.02a8.08 8.08 0 0 1 6.66 4.13l.43.84a6.91 6.91 0 0 1-1.22 7.56l-2.36 2.36A10.06 10.06 0 0 0 85 68a11 11 0 0 0 22 0c0-1.94-1.16-4.75-2.53-6.11l-2.36-2.36a6.93 6.93 0 0 1-1.22-7.56l.43-.84a8.08 8.08 0 0 1 6.66-4.13H143V11.98a6.1 6.1 0 0 0-3.03-4.87l-.84-.43c-1.59-.8-4-.4-5.24.85l-2.36 2.36A12 12 0 0 1 124 13a13 13 0 0 1-13-13h2a11 11 0 0 0 11 11c1.94 0 4.75-1.16 6.11-2.53l2.36-2.36a6.93 6.93 0 0 1 7.56-1.22l.84.43a8.08 8.08 0 0 1 4.13 6.66V47h35.02a6.1 6.1 0 0 0 4.87-3.03l.43-.84c.8-1.59.4-4-.85-5.24l-2.36-2.36A12 12 0 0 1 179 28a13 13 0 0 1 13-13zM84.02 143a6.1 6.1 0 0 0 4.87-3.03l.43-.84c.8-1.59.4-4-.85-5.24l-2.36-2.36A12 12 0 0 1 83 124a13 13 0 1 1 26 0c0 2.47-1.37 5.79-3.11 7.53l-2.36 2.36a4.94 4.94 0 0 0-.85 5.24l.43.84a6.1 6.1 0 0 0 4.87 3.03H143v-35.02a8.08 8.08 0 0 1 4.13-6.66l.84-.43a6.91 6.91 0 0 1 7.56 1.22l2.36 2.36A10.06 10.06 0 0 0 164 107a11 11 0 0 0 0-22c-1.94 0-4.75 1.16-6.11 2.53l-2.36 2.36a6.93 6.93 0 0 1-7.56 1.22l-.84-.43a8.08 8.08 0 0 1-4.13-6.66V49h-35.02a6.1 6.1 0 0 0-4.87 3.03l-.43.84c-.79 1.58-.4 4 .85 5.24l2.36 2.36a12.04 12.04 0 0 1 3.11 7.51A13 13 0 1 1 83 68a12 12 0 0 1 3.11-7.53l2.36-2.36a4.93 4.93 0 0 0 .85-5.24l-.43-.84A6.1 6.1 0 0 0 84.02 49H49v35.02a8.08 8.08 0 0 1-4.13 6.66l-.84.43a6.91 6.91 0 0 1-7.56-1.22l-2.36-2.36A10.06 10.06 0 0 0 28 85a11 11 0 0 0 0 22c1.94 0 4.75-1.16 6.11-2.53l2.36-2.36a6.93 6.93 0 0 1 7.56-1.22l.84.43a8.08 8.08 0 0 1 4.13 6.66V143h35.02z'%3E%3C/path%3E%3C/svg%3E"
// }
const sunIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="sun-icon">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
</svg>`;
const moonIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="moon-icon">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
</svg>`;
const toggleDarkMode = document.querySelector(".dark-toggle-container");
const clockElement = document.querySelector(".clock");
const dateElement = document.querySelector(".date");
const greetElement = document.querySelector(".greeting");
const btnEditLink = document.querySelector(".btn-edit");
const btnAddNewLink = document.querySelector(".btn-new");
const btnSaveLink = document.querySelector(".btn-save");
const btnUpdateEditedLink = document.querySelector(".btn-update");
const modalDialog = document.querySelector(".modal-container");
const closeModal = document.querySelector(".close");
const btnActions = document.querySelectorAll(".btn");
const colorsMenu = document.querySelector("#select-colors");
const urlInput = document.querySelector("#url");
const titleInput = document.querySelector("#title");
const linksContainer = document.querySelector(".links-container");
const valueBeforeEdit = document.querySelector(".value-before-edit");
const modalTitle = document.querySelector("span.modal-title");
const body = document.body;
const showActions = true;
const dontShowActions = false;

// Functions
const date = () => {
  const dateObj = new Date();
  return dateObj.toLocaleString(navigator.language, {
    month: "long",
    day: "numeric",
    year: "numeric",
    weekday: "long",
  });
};
const time = () => {
  const dateObj = new Date();
  return dateObj.toLocaleString(navigator.language, {
    hour: "2-digit",
    minute: "2-digit",
    hour12: false,
  });
};
const greet = () => {
  const dateObj = new Date();
  const currentHour = dateObj.getHours();
  if (currentHour >= 0 && currentHour < 11) {
    return "Good Morning";
  }
  if (currentHour >= 11 && currentHour < 14) {
    return "Good Noon";
  }
  if (currentHour >= 14 && currentHour < 18) {
    return "Good Afternoon";
  }
  if (currentHour >= 18 && currentHour < 24) {
    return "Good Evening";
  }
};
const theme = {
  light: () => {
    const linkElements = document.querySelectorAll("div.links");
    const bgColor = tailwindColors.blueGray100;
    const patternColor = tailwindColors.blueGray200
      .split("")
      .splice(1, 6)
      .join("");
    const bg = `${bgColor} url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23${patternColor}' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40'/%3E%3C/g%3E%3C/svg%3E")`;
    toggleDarkMode.innerHTML = moonIcon;
    toggleDarkMode.style.background = "white";
    body.style.background = bg;
    for (const each of linkElements) {
      each.style.background = "white";
    }
    [btnAddNewLink, btnEditLink].forEach((element) => {
      element.style.color = tailwindColors.gray800;
    });
  },
  dark: () => {
    const linkElements = document.querySelectorAll("div.links");
    const bgColor = tailwindColors.gray900;
    const patternColor = tailwindColors.gray800.split("").splice(1, 6).join("");
    const bg = `${bgColor} url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23${patternColor}' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40'/%3E%3C/g%3E%3C/svg%3E")`;
    toggleDarkMode.innerHTML = sunIcon;
    toggleDarkMode.style.background = tailwindColors.gray800;
    body.style.background = bg;
    for (const each of linkElements) {
      each.style.background = tailwindColors.gray800;
    }
    [btnAddNewLink, btnEditLink].forEach((element) => {
      element.style.color = "white";
    });
  },
};
const getTheme = () => {
  const getTheme = localStorage.getItem("theme");
  if (getTheme == null || getTheme == undefined || getTheme == "dark") {
    theme.dark();
    localStorage.setItem("theme", "dark");
  } else if (getTheme == "light") {
    theme.light();
    localStorage.setItem("theme", "light");
  }
};
const toggleShowModal = (whatModal, whatElement) => {
  switch (whatModal) {
    // case "editmodal":
    //   const test = JSON.parse(localStorage.getItem("linksList"));
    //   injectColorsToDropdown();
    //   test.some((link) => {
    //     if (link.title === whatElement) {
    //       titleInput.value = link.title;
    //       urlInput.value = link.url;
    //       colorsMenu.value = link.color;
    //       valueBeforeEdit.value = [link.title, link.url, link.color];
    //     }
    //   });
    //   btnUpdateEditedLink.classList.remove("btn-update-visibility");
    case "justmodal":
      modalDialog.classList.toggle("modal-container-visibility");
    default:
      break;
  }
};
const loadLinks = () => {
  if (!localStorage.getItem("linksList")) {
    alert("No Links yet");
  } else {
    const linksList = JSON.parse(localStorage.getItem("linksList"));
    linksContainer.innerHTML = "";
    for (const link of linksList) {
      let title = link.title;
      let url = link.url;
      let color = link.color;
      let element = `<div class="links">
                <a href="${url}" style=" color:${color}">${title}</a>
                <div class="btn btn-visibility">
                  <div onclick="storageManagement.remove('${title}')" class="btn-remove-selected-link"></div>
                </div>
              </div>`;
      linksContainer.insertAdjacentHTML("beforeend", element);
    }
    getTheme();
  }
};
const storageManagement = {
  add: (title, url, color) => {
    let newLink = {
      title: title,
      url: url,
      color: color,
    };
    let linksList;
    if (!localStorage.getItem("linksList")) {
      linksList = [];
      linksList.push(newLink);
      localStorage.setItem("linksList", JSON.stringify(linksList));
      loadLinks();
    } else {
      linksList = JSON.parse(localStorage.getItem("linksList"));
      const duplicate = linksList.some((link) => {
        return link.title === title;
      });
      if (duplicate) {
        alert("That link already exist");
      } else {
        linksList.push(newLink);
        localStorage.setItem("linksList", JSON.stringify(linksList));
        loadLinks();
      }
    }
  },
  // update: (value) => {
  //   const linksList = JSON.parse(localStorage.getItem("linksList"));
  //   const arrayBeforeEdit = value.split(",");
  //   const duplicate = linksList.some(link => link.title === titleInput.value);
  //   if (titleInput.value === arrayBeforeEdit[0] && urlInput.value === arrayBeforeEdit[1] && colorsMenu.value === arrayBeforeEdit[2]) {
  //     alert("nothing changed");
  //   } else {
  //     if(linksList.some((link) => link.title === titleInput.value)) {
  //       alert("duplicate")
  //     }
  //     else if(linksList.some(link => link.title === titleInput.value && (link.url !== urlInput.value || link.color !== colorsMenu.value))){
  //       linksList.some((link) => {
  //         if (link.title === arrayBeforeEdit[0]) {
  //           link.title = titleInput.value;
  //           link.url = urlInput.value;
  //           link.color = colorsMenu.value;
  //         }
  //       });
  //     }
  //   }
  //   localStorage.setItem("linksList", JSON.stringify(linksList));
  //   loadLinks();
  //   valueBeforeEdit.value = "";
  // },
  remove: (whatElement) => {
    let linksList = JSON.parse(localStorage.getItem("linksList"));
    for (const [index] of linksList.entries()) {
      if (linksList[index].title === whatElement) {
        linksList.splice(index, 1);
      }
    }
    localStorage.setItem("linksList", JSON.stringify(linksList));
    btnEditLink.innerHTML = "Edit Link";
    mode("quit", btnAddNewLink, dontShowActions);
    loadLinks();
  },
};
const injectColorsToDropdown = () => {
  for (const eachColor in linkTextColors) {
    let opt = document.createElement("option");
    if (linkTextColors.hasOwnProperty(eachColor)) {
      let value = linkTextColors[eachColor];
      opt.value = value;
    }
    opt.innerText = eachColor;
    opt.style.color = linkTextColors[eachColor];
    colorsMenu.appendChild(opt);
  }
};
// Function to select enter mode or quit mode
const mode = (enterOrQuitMode, elementToOverride, showActionsButtonOrNo) => {
  switch (enterOrQuitMode) {
    case "enter":
      elementToOverride.disabled = true;
      elementToOverride.style.cursor = "not-allowed";
      break;
    case "quit":
      elementToOverride.disabled = false;
      elementToOverride.style.cursor = "pointer";
      urlInput.value = null;
      titleInput.value = null;
    default:
      break;
  }
  if (showActionsButtonOrNo == true) {
    document.querySelectorAll(".btn").forEach((theButton) => {
      theButton.classList.toggle("btn-visibility");
    });
  }
};

// Events
// Toggle showing modal dialog and choose enter add-new mode or quit from it
[btnAddNewLink, closeModal, btnSaveLink, btnUpdateEditedLink].forEach(
  (element) => {
    element.addEventListener("click", (e) => {
      switch (element) {
        case btnSaveLink:
          if (titleInput.value == "" || urlInput.value == "") {
            alert("Must provide Title and URL, Nothing saved");
          } else {
            storageManagement.add(
              titleInput.value,
              urlInput.value,
              colorsMenu.value
            );
            getTheme();
          }
          colorsMenu.innerHTML = "";
          mode("quit", btnEditLink, dontShowActions);
          e.preventDefault();
          btnSaveLink.classList.add("btn-save-visibility");
          btnUpdateEditedLink.classList.add("btn-update-visibility");
          break;
        // case btnUpdateEditedLink:
        //   if (titleInput.value == "" || urlInput.value == "") {
        //     alert("Must provide Title and URL, Nothing saved");
        //   } else {
        //     storageManagement.update(valueBeforeEdit.value);
        //     getTheme();
        //   }
        //   colorsMenu.innerHTML = "";
        //   btnEditLink.innerHTML = "Edit Link";
        //   mode("quit", btnAddNewLink, dontShowActions);
        //   e.preventDefault();
        //   btnSaveLink.classList.add("btn-save-visibility");
        //   btnUpdateEditedLink.classList.add("btn-update-visibility");
        //   break;
        case closeModal:
          mode("quit", btnEditLink, dontShowActions);
          // mode("quit", btnAddNewLink, dontShowActions);
          colorsMenu.innerHTML = "";
          btnSaveLink.classList.add("btn-save-visibility");
          btnUpdateEditedLink.classList.add("btn-update-visibility");
          break;
        case btnAddNewLink:
          btnSaveLink.classList.remove("btn-save-visibility");
          mode("enter", btnEditLink, dontShowActions);
          modalTitle.innerHTML = "Add New Link";
          injectColorsToDropdown();
          break;
        default:
          break;
      }
      toggleShowModal("justmodal", null);
    });
  }
);
[btnSaveLink, btnUpdateEditedLink].forEach((element) => {
  element.addEventListener("submit", (e) => {
    e.preventDefault();
  });
});
// Enter edit mode
btnEditLink.addEventListener("click", () => {
  if (btnEditLink.innerHTML != "OK") {
    mode("enter", btnAddNewLink, true);
    btnEditLink.innerHTML = "OK";
    modalTitle.innerHTML = "Edit Link";
  } else {
    mode("quit", btnAddNewLink, true);
    btnEditLink.innerHTML = "Edit Link";
  }
});
// toggle dark mode
toggleDarkMode.addEventListener("click", () => {
  const getTheme = localStorage.getItem("theme");
  if (getTheme == "dark") {
    theme.light();
    localStorage.setItem("theme", "light");
  } else if (getTheme == "light") {
    theme.dark();
    localStorage.setItem("theme", "dark");
  }
});
// Apply date, time, and greeting to DOM
setInterval(() => {
  clockElement.innerHTML = time();
  dateElement.innerHTML = date();
  greetElement.innerHTML = greet();
}, 1000);

// On load
window.addEventListener("load", () => {
  loadLinks();
  getTheme();
});
